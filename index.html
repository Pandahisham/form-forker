<!DOCTYPE html>
<html>
  <head>
    <title>Form Forker - a jQuery plugin for handling conditional form fields</title>
    <script src="libs/jquery/jquery.js"></script>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="branching-form">
      <h1>Form Forker</h1>

      <!-- Level 0 form field: person_age -->
      <div class="field">
        <label>How old are you?</label>
        <input type="text" name="person_age" placeholder="Age" />

        <!-- Level 1 form fields: children of person_age -->
        <div class="field hidden" data-parent-branch="person_age" data-show-on-value="3..7">
          <p class="info"><span class="level">Level 1</span> Person's age is <b>between 3 & 7</b></p>
          <label>What's your favorite candy?</b></label>
          <input type="text" name="favorite_candy" placeholder="Favorite candy" />

          <!-- Level 2 form fields: children of favorite_candy -->
          <div class="field hidden" data-parent-branch="favorite_candy" data-show-on-value=" StarBurst,skittles">
             <p class="info"><span class="level">Level 2</span> Person's favorite candy is <b>starburst or skittles</b></p>
            <label>What flavor?</b></label>
            <input type="text" name="what_flavor_starburst" placeholder="What flavor?" />
          </div>
          <div class="field hidden" data-parent-branch="favorite_candy" data-show-on-value="chocolate">
             <p class="info"><span class="level">Level 2</span> Person's favorite candy is <b>chocolate</b></p>
            <label>Which chocolate bar?</b></label>
            <input type="text" name="which_chocolate_bar" placeholder="Which chocolate bar?" />
          </div>
        </div>

        <!-- Level 1 form fields: children of person_age -->
        <div class="field hidden" data-parent-branch="person_age" data-show-on-value="!5,!7">
           <p class="info"><span class="level">Level 1</span> Person's age <b>does not equal 5 or 7</b></p>
          <label>Did you start kindergarden this year?</label>
          <input type="hidden" name="started_kindergarden_this_year" />
          <span class="custom-radio"> YES</span>
          <span class="custom-radio"> NO</span>

          <!-- Level 2 form fields: children of started_kindergarden_this_year -->
          <div class="field hidden" data-parent-branch="started_kindergarden_this_year" data-show-on-value="yes">
             <p class="info"><span class="level">Level 2</span> Person <b>did</b> start kindergarden this year</p>
            <label>What kindergarden do you go to?</b></label>
            <input type="text" name="what_kindergarden" />
          </div>
        </div>

        <!-- Level 1 form fields: children of person_age -->
        <div class="field hidden" data-parent-branch="person_age" data-show-on-value="gte-21">
          <p class="info"><span class="level">Level 1</span>Person's age is <b>at least 21</b></p>
          <label>Did you graduate college?</label>
          <input type="radio" name="graduated_college" value="1">Yes &nbsp;
          <input type="radio" name="graduated_college" value="2">No &nbsp;
          <input type="radio" name="graduated_college" value="3">Maybe

          <!-- Level 2 form fields: children of started_kindergarden_this_year -->
          <div class="field hidden" data-parent-branch="graduated_college" data-show-on-value="1">
             <p class="info"><span class="level">Level 2</span> Person <b>did</b> graduate college</p>
            <label>What college did you graduate from?</b></label>
            <input type="text" name="graduated_from" />
          </div>

          <div class="field hidden" data-parent-branch="graduated_college" data-show-on-value="2,3">
             <p class="info"><span class="level">Level 2</span> Person <b>did not</b> graduate college</p>
            <label>What college would you like to attend?</b></label>
            <input type="text" name="wants_to_graduate_from" />
          </div>
        </div>
      </div>

      <!-- Level 0 form field: person_income -->
      <div class="field">
        <label>What is your annual income?</label>
        <select name="person_income">
          <option value="under30">$0 - $30,000</option>
          <option value="between30and60">$30,000 - $60,000</option>
          <option value="between60and100">$60,000 - $100,000</option>
          <option value="morethan100">More than $100,000</option>
        </select>

        <!-- Level 1 form fields: children of person_income -->
        <div class="field hidden" data-parent-branch="person_income" data-show-on-value="morethan100">
          <p class="info"><span class="level">Level 1</span> Person earns <b>more than $100,000</b></p>
          <label>How does it feel to be rich?</label>
          <input type="text" name="being_rich" />
        </div>
      </div>
    </div>

    <div id="fake-submit-button">Submit</div>
    <div id="fake-post-data"></div>

    <script type="text/javascript" src="src/jquery.form-forker.js"></script>
    <script type="text/javascript">

      (function () {
        $('#branching-form').forkable({
            branchingMethods: {
                "customEval": function(childBranches, userEnteredValue) {
                    console.log("CUSTOM This: ", this);
                    console.log("CB: ", childBranches);
                    console.log("User Val: ", userEnteredValue)
                }
            }
        });

        // /* Attach click event handler for custom radios */
        // $('#branching-form').find('div span.custom-radio').click(function(e) {
        //   userFeedbackForm.util.handleCustomRadios(e);
        // });

        // /* Stub submit button to display postData on form submit */
        // $('#fake-submit-button').click(function(e) {
        //   var stringifiedPostData = userFeedbackForm.postData();
        //   stringifiedPostData = JSON.stringify(stringifiedPostData);
        //   var radioVal = $(userFeedbackForm).find('input[type=radio').val();
        //   $('#fake-post-data').html('<h2>Post Data on Submit:</h2>' + stringifiedPostData);
        // });

      })();

    </script>
    <a href="https://github.com/brittanystoroz/form-forker"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
  </body>
</html>
